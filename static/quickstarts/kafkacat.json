{
  "metadata": {
    "name": "kafkacat"
  },
  "spec": {
    "displayName": "Using Kafkacat with Kafka instances in Red Hat Streams for Apache Kafka",
    "durationMinutes": 10,
    "icon": "",
    "description": "Learn how to use Kafkacat to interact with a Kafka instance in Red Hat Streams for Apache Kafka.",
    "prerequisites": [
      "A running Kafka instance (see the Getting Started quick start)",
      "A command-line terminal application"
    ],
    "introduction": "Welcome to the Red Hat Streams for Apache Kafka Kafkacat quick start. In this quick start, youâ€™ll learn how to use <a href=\"https://github.com/edenhill/kafkacat\">Kafkacat</a> to produce and consume messages for your Kafka instances in Red Hat Streams for Apache Kafka.",
    "tasks": [
      {
        "title": "Installing and verifying Kafkacat",
        "description": "<div class=\"paragraph\">\n<p><a href=\"https://github.com/edenhill/kafkacat\">Kafkacat</a> is a command-line utility for messaging in Apache Kafka 0.8 and later. You can install and use Kafkacat to test and debug your Kafka instances in Streams for Apache Kafka. With Kafkacat, you can produce and consume messages for your Kafka instances directly from the command line, and list topic and partition information for your Kafka instances.</p>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>In a web browser, go to the <a href=\"https://github.com/edenhill/kafkacat\">Kafkacat</a> repository in GitHub and follow the installation instructions for your operating system.</p>\n</li>\n<li>\n<p>Verify that the expected version was installed:</p>\n<div class=\"listingblock\">\n<div class=\"title\">Verifying Kafkacat installation</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code>$ kafkacat -V\n</code><p><code>kafkacat - Apache Kafka producer and consumer tool\nhttps://github.com/edenhill/kafkacat\nCopyright (c) 2014-2019, Magnus Edenhill\nVersion 1.6.0 (JSON, Avro, Transactions, librdkafka 1.6.1 builtin.features=gzip,snappy,ssl,sasl,regex,lz4,sasl_gssapi,sasl_plain,sasl_scram,plugins,zstd,sasl_oauthbearer)</code></p></pre><p></p>\n</div>\n</div>\n</li>\n</ol>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Verification</div>\n<ul>\n<li>\n<p>Was Kafkacat installed successfully?</p>\n</li>\n</ul>\n</div>"
      },
      {
        "title": "Configuring Kafkacat to connect to a Kafka instance",
        "description": "<div class=\"paragraph\">\n<p>To enable Kafkacat to access a Kafka instance, you must configure the connection using the bootstrap server endpoint and the generated credentials for your Streams for Apache Kafka service account. For Kafkacat, you can configure connection information either by passing options to the <code>kafkacat</code> command or by using a configuration file. This example sets environment variables and then passes them to the <code>kafkcat</code> command.</p>\n</div>\n<div class=\"paragraph\">\n<p>For more information about Kafkacat configuration options, see <a href=\"https://github.com/edenhill/kafkacat#configuration\">Configuration</a> in the Kafkacat documentation.</p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Prerequisites</div>\n<ul>\n<li>\n<p>You have the bootstrap server endpoint (external server endpoint) and the generated credentials for your service account. You retrieved this information previously for the Kafka instance in Streams for Apache Kafka by selecting the options menu (three vertical dots), clicking <strong>Connect to instance</strong>, and generating the service account.</p>\n</li>\n</ul>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Procedure</div>\n<ul>\n<li>\n<p>On the command line, enter the following commands to set the Kafka instance bootstrap server and client credentials as environment variables to be used by Kafkacat or other applications. Replace the values with your own server and credential information.</p>\n<div class=\"listingblock\">\n<div class=\"title\">Setting environment variables for server and credentials</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code>$ export BOOTSTRAP_SERVER=<em>&#x3C;bootstrap_server></em>\n$ export USER=<em>&#x3C;client_id></em>\n$ export PASSWORD=<em>&#x3C;client_secret></em></code></pre>\n</div>\n</div>\n</li>\n</ul>\n</div>"
      },
      {
        "title": "Producing messages in Kafkacat",
        "description": "<div class=\"paragraph\">\n<p>You can use Kafkacat to produce messages to Kafka topics in several ways, such as reading them from standard input (<code>stdin</code>) directly on the command line or from a file. This example produces messages from input on the command line. For more examples of Kafkacat producer messaging, see the <a href=\"https://github.com/edenhill/kafkacat#examples\">Examples</a> in the Kafkacat documentation.</p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Prerequisites</div>\n<ul>\n<li>\n<p>Kafkacat is installed.</p>\n</li>\n<li>\n<p>You have a running Kafka instance in Streams for Apache Kafka.</p>\n</li>\n<li>\n<p>You have set the Kafka bootstrap server endpoint and your service account credentials as environment variables.</p>\n</li>\n</ul>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>On the command line, enter the following commands to start Kafkacat in <em>producer</em> mode. This mode enables you to produce messages to your Kafka topic.</p>\n<div class=\"openblock\">\n<div class=\"content\">\n<div class=\"paragraph\">\n<p>This example uses the SASL/PLAIN authentication mechanism with the server and credential environment variables that you set previously. This example produces messages to the <code>my-first-kafka-topic</code> example topic. If this topic does not exist yet, it is automatically created with default settings.</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"title\">Starting Kafkacat in producer mode</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code>$ kafkacat -t my-first-kafka-topic -b \"$BOOTSTRAP_SERVER\" \\\n -X security.protocol=SASL_SSL -X sasl.mechanisms=PLAIN \\\n -X sasl.username=\"$USER\" \\\n -X sasl.password=\"$PASSWORD\" -P</code></pre>\n</div>\n</div>\n<div class=\"admonitionblock note\">\n<table>\n<tbody><tr>\n<td class=\"icon\">\n<div class=\"title\">Note</div>\n</td>\n<td class=\"content\">\nStreams for Apache Kafka also supports the SASL/OAUTHBEARER mechanism for authentication, which is the recommended authentication mechanism to use. However, Kafkacat does not yet fully support OAUTHBEARER, so this example uses SASL/PLAIN.\n</td>\n</tr>\n</tbody></table>\n</div>\n</div>\n</div>\n</li>\n<li>\n<p>With Kafkacat running in producer mode, enter messages into Kafkacat that you want to produce to the Kafka topic.</p>\n<div class=\"listingblock\">\n<div class=\"title\">Example messages to produce to the Kafka topic</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code>First message\nSecond message\nThird message</code></pre>\n</div>\n</div>\n</li>\n<li>\n<p>Keep this producer running to use later when you create a consumer.</p>\n</li>\n</ol>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Verification</div>\n<ul>\n<li>\n<p>Is your producer still running without any errors in the terminal?</p>\n</li>\n</ul>\n</div>"
      },
      {
        "title": "Consuming messages in Kafkacat",
        "description": "<div class=\"paragraph\">\n<p>You can use Kafkacat to consume messages from Kafka topics. This example consumes the messages that you sent previously with the producer that you created with Kafkacat.</p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Prerequisites</div>\n<ul>\n<li>\n<p>Kafkacat is installed.</p>\n</li>\n<li>\n<p>You have a running Kafka instance in Streams for Apache Kafka.</p>\n</li>\n<li>\n<p>You have set the Kafka bootstrap server endpoint and your service account credentials as environment variables.</p>\n</li>\n<li>\n<p>You used a producer to produce example messages to a topic.</p>\n</li>\n</ul>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>On the command line in a separate terminal from your producer, enter the following commands to start Kafkacat in <em>consumer</em> mode. This mode enables you to consume messages from your Kafka topic.</p>\n<div class=\"openblock\">\n<div class=\"content\">\n<div class=\"paragraph\">\n<p>This example uses the SASL/PLAIN authentication mechanism with the server and credential environment variables that you set previously. This example consumes and displays the messages from the <code>my-first-kafka-topic</code> example topic, and states that it reached the end of partition <code>0</code> in the topic.</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"title\">Starting Kafkacat in consumer mode</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code>$ kafkacat -t my-first-kafka-topic -b \"$BOOTSTRAP_SERVER\" \\\n -X security.protocol=SASL_SSL -X sasl.mechanisms=PLAIN \\\n -X sasl.username=\"$USER\" \\\n -X sasl.password=\"$PASSWORD\" -C\n</code><p><code>First message\nSecond message\nThird message\n% Reached end of topic my-first-kafka-topic [0] at offset 3</code></p></pre><p></p>\n</div>\n</div>\n</div>\n</div>\n</li>\n<li>\n<p>If your producer is still running in a separate terminal, continue entering messages in the producer terminal and observe the messages being consumed in the consumer terminal.</p>\n</li>\n</ol>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Verification</div>\n<ul>\n<li>\n<p>Is your consumer running without any errors in the terminal?</p>\n</li>\n<li>\n<p>Did the consumer display the messages from the <code>my-first-kafka-topic</code> example topic?</p>\n</li>\n</ul>\n</div>\n<div id=\"conclusion\" class=\"paragraph\">\n<p>Congratulations! You successfully completed the Streams for Apache Kafka Kafkacat quick start, and are now ready to produce and consume messages in the service.</p>\n</div>"
      }
    ],
    "conclusion": "Congratulations! You successfully completed the Streams for Apache Kafka Kafkacat quick start, and are now ready to produce and consume messages in the service."
  }
}